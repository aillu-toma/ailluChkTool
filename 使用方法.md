# 勤怠チェックツール 使用方法

## 1. ツールの起動

1. `index.html` ファイルをブラウザで開きます
2. 以下のブラウザに対応しています：
   - Google Chrome
   - Mozilla Firefox
   - Microsoft Edge
   - Safari

## 2. CSVファイルの準備

### 日次データ（CSV）
以下の項目を含むCSVファイルを準備してください：

| 項目名 | 必須 | 説明 |
|--------|------|------|
| 社員コード | ○ | 社員を識別するコード |
| 社員氏名（漢字） | ○ | 社員の氏名 |
| 年月日 | ○ | 勤務日（YYYY-MM-DD形式） |
| 曜日コード | ○ | 曜日のコード |
| 勤務区分 | ○ | 勤務区分コード（EFS01/Z01） |
| 勤務区分名称（漢字） | ○ | 勤務区分の名称 |
| 就業開始時刻 | ○ | 開始時刻（HH:MM形式） |
| 就業終了時刻 | ○ | 終了時刻（HH:MM形式） |
| 休暇コード | - | 休暇コード |
| 休暇コード名称 | - | 休暇コードの名称 |
| 実働時間 | ○ | 実働時間（時間単位、小数点形式） |
| フレックス対象時間差 | - | フレックスタイムの時間差 |
| コメント | - | 備考・コメント |

### 届け出データ（CSV）
以下の項目を含むCSVファイルを準備してください：

| 項目名 | 必須 | 説明 |
|--------|------|------|
| 社員コード | ○ | 社員を識別するコード |
| 社員氏名（漢字） | ○ | 社員の氏名 |
| 届出区分 | ○ | 届出区分コード |
| 届出略称 | ○ | 届出の略称 |
| 対象年月日 | ○ | 対象日（YYYY-MM-DD形式） |
| 休暇名称（漢字） | - | 休暇の名称 |
| 深夜外残業時間 | - | 深夜外の残業時間 |
| 深夜残業時間 | - | 深夜の残業時間 |

## 3. ファイルのアップロード

1. 「日次データ（CSV）」のファイル選択ボタンをクリック
2. 日次データのCSVファイルを選択
3. 「届け出データ（CSV）」のファイル選択ボタンをクリック
4. 届け出データのCSVファイルを選択

**注意**: CSVファイルはShift_JISエンコーディングで保存してください。

## 4. チェック項目の選択

以下のチェック項目から実行したいものを選択してください：

### チェック0: 在宅か出社かチェック
- 勤務区分の妥当性をチェック（EFS01/Z01）
- 在宅勤務（Z01）の場合、届出区分=85の確認
- 不正な勤務区分の検出

### チェック1: 残業関連チェック
- **残業申請有無チェック**: 出社勤務（EFS01）で8時間超過時の申請確認
- **残業時間チェック**: 残業申請と実際の勤務時間の整合性（10分単位での誤差は許容）

### チェック2: 在宅残業関連チェック
- **在宅残業申請チェック**: 在宅勤務（Z01）で8時間超過時の届出確認
- **在宅残業時間チェック**: 在宅残業申請と実際の勤務時間の整合性（10分単位での誤差は許容）

### チェック3: 定時外勤務チェック
- 深夜勤務（22時～5時）の届出と残業時間の設定確認

### チェック4: 打刻忘れチェック
- 打刻忘れ時のコメント入力確認

## 5. チェック実行

1. 「チェック実行」ボタンをクリック
2. 処理が完了するまでお待ちください
3. 結果が画面下部に表示されます

## 6. 結果の確認

### 成功の場合
- 「チェック結果：問題は見つかりませんでした。」と表示されます

### エラーがある場合
- エラー件数が表示されます
- 日付順でソートされて表示されます

### 結果の詳細
各エラーには以下の情報が含まれます：
- エラーの種類
- 対象者の氏名
- 対象日
- 実働時間（該当する場合）
- 勤務時間（該当する場合）
- 詳細な説明

## 7. サンプルファイル

テスト用のサンプルファイルが用意されています：

### 正常なデータ
- `sample_daily_data.csv`: 正常な日次データ
- `sample_application_data.csv`: 正常な届け出データ

### エラーケースを含むデータ
- `sample_daily_data_with_errors.csv`: エラーケースを含む日次データ
- `sample_application_data_with_errors.csv`: エラーケースを含む届け出データ

## 8. トラブルシューティング

### よくある問題

**Q: ファイルが読み込めません**
A: 以下を確認してください：
- ファイルがCSV形式であること
- ファイルがShift_JISエンコーディングで保存されていること
- ファイルサイズが適切であること

**Q: 項目が見つからないエラーが出ます**
A: 以下を確認してください：
- CSVファイルのヘッダー行に必要な項目名が含まれていること
- 項目名の表記が正確であること（全角・半角、スペース等）

**Q: チェック結果が期待と異なります**
A: 以下を確認してください：
- データの形式が正しいこと
- 日付形式がYYYY-MM-DDであること
- 時刻形式がHH:MMであること
- 数値データが正しく入力されていること
- 勤務区分コードがEFS01またはZ01であること

## 9. 注意事項

- 個人情報を含むデータの取り扱いには十分ご注意ください
- 大きなファイルサイズの場合は処理に時間がかかる場合があります
- ブラウザの設定によってはファイルの読み込みが制限される場合があります
- 結果はブラウザのメモリに保存されるため、ページを閉じると消去されます
- 項目名の文字列が一致する項目で利用項目を判定します（配列の位置では判定しません）

## 10. コード体系

### 勤務区分コード
- EFS01: 出社勤務
- Z01: 在宅勤務

### 届出区分コード
- 80: 残業
- 81: 在宅残業
- 85: 在宅勤務/深夜勤務

### 照合キー
- **マスタデータ**: 社員コード + 年月日
- **トランザクションデータ**: 社員コード + 対象年月日 